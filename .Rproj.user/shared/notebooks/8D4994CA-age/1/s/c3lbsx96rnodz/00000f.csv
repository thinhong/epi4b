"0","df_plot <- df |> "
"0","  filter(!is.na(week_onset), !is.na(age_cat)) |> "
"0","  count(week_onset, age_cat) |> "
"0","  group_by(week_onset) |> "
"0","  mutate(prop = n / sum(n)) |> "
"0","  data.frame()"
"0",""
"0","# Use complete to fill missing groups with 0"
"0","df_plot <- df_plot |> "
"0","  complete(week_onset, age_cat, fill = list(n = 0, prop = 0))"
